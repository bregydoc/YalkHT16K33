#ifndef KlayScreen_h
#define KlayScreen_h


#include <Arduino.h>
#include "HT16K33.h"
#include "KlayController.h"
#include <avr/pgmspace.h>

#define MODE_A 0
#define MODE_B 1

const uint8_t goodMessage[][21] PROGMEM =
    {{1,1,1,0,0,0,1,0,0,1,1,1,1,0,0,1,0,0,1,0,0},
     {1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,1,0,1,0,0},
     {1,1,1,0,0,0,1,0,0,1,1,1,0,0,0,1,0,1,1,0,0},
     {1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,0,0},
     {1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,1,0,0,1,0,0},
     {1,1,1,0,0,0,1,0,0,1,1,1,1,0,0,1,0,0,1,0,0}};

const bool checkPlease[][51] PROGMEM =
    {{1,1,1,0,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,1,1,1,0,0,1,1,0,0,0,0,1,1,1,0,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,1,1},
     {1,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0},
     {1,0,0,1,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,1,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,1,1,1,0,0,1,0,0,0,1,0,1,0,0,1,1},
     {1,1,1,0,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,1,1,1,1,0,0,0,1,1,1,0,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0},
     {1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0},
     {1,0,0,1,0,1,1,1,1,0,0,0,1,0,0,0,1,0,1,1,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,0,0,1,0,0,0,1,0,1,1,1}};


const uint8_t numbers [11][6][4] PROGMEM =
     {{{0,1,1,0},
     {1,0,0,1},
     {1,0,0,1},
     {1,0,0,1},
     {1,0,0,1},
     {0,1,1,0}},

     {{0,0,0,1},
     {0,0,1,1},
     {0,0,0,1},
     {0,0,0,1},
     {0,0,0,1},
     {0,0,0,1}},

     {{0,1,1,0},
     {1,0,0,1},
     {0,0,0,1},
     {0,0,1,0},
     {0,1,0,0},
     {1,1,1,1}},

     {{1,1,1,0},
     {0,0,0,1},
     {0,1,1,0},
     {0,0,0,1},
     {0,0,0,1},
     {1,1,1,0}},

     {{1,0,0,1},
     {1,0,0,1},
     {1,0,0,1},
     {1,1,1,1},
     {0,0,0,1},
     {0,0,0,1}},

     {{1,1,1,1},
     {1,0,0,0},
     {1,1,1,0},
     {0,0,0,1},
     {0,0,0,1},
     {1,1,1,0}},

     {{0,1,1,1},
     {1,0,0,0},
     {1,1,1,0},
     {1,0,0,1},
     {1,0,0,1},
     {0,1,1,0}},

     {{1,1,1,1},
     {0,0,0,1},
     {0,0,0,1},
     {0,0,1,0},
     {0,0,1,0},
     {0,0,1,0}},

     {{0,1,1,0},
     {1,0,0,1},
     {1,0,0,1},
     {1,1,1,1},
     {1,0,0,1},
     {0,1,1,0}},

     {{0,1,1,0},
     {1,0,0,1},
     {1,0,0,1},
     {0,1,1,1},
     {0,0,0,1},
     {0,1,1,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {0,0,0,0},
     {0,0,0,0},
     {0,0,0,0},
     {0,0,0,0}}};

class KlayScreen {

private:
    KlayController controller;
    boolean mode;




public:
    //HT16K33_ADDR1 = 0x70
    //HT16K33_ADDR2 = 0x71
    KlayScreen(KlayController controller, int mode);
    void begin();
    void clearScreen();
    //First level
    void updateScreen();
    void setPixel(int x, int y, bool state);
    void setPixel(int x, int y, uint8_t state);
    //Second abstract level
    void fillArea(int x1, int y1, int x2, int y2, uint8_t state);
    void draw(uint8_t screen[6][21]);
    //Plusplus!

    void printNumber(int number, int x, int y);
    void printGoodMessage();
    void printCheckMessage(int step);

};


#endif
